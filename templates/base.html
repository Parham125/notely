<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>{% block title %}Notely{% endblock %}</title>
<meta property="og:type" content="{% block og_type %}website{% endblock %}">
<meta property="og:site_name" content="Notely">
<meta property="og:title" content="{% block og_title %}Notely - Open Source Blog Platform{% endblock %}">
<meta property="og:description" content="{% block og_description %}Share your thoughts with the world on Notely, a simple and elegant open source blogging platform.{% endblock %}">
<meta property="og:url" content="{% block og_url %}{{ request.base_url }}{% endblock %}">
<meta property="og:image" content="{% block og_image %}{{ request.base_url.rstrip('/') }}/static/favicon.ico{% endblock %}">
<meta name="twitter:card" content="summary_large_image">
<link rel="stylesheet" href="/static/css/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<script>const t=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",t);</script>
</head>
<body>
<header>
<div class="container header-content">
<a href="/" class="logo">Notely</a>
<button class="mobile-menu-toggle" onclick="toggleMobileMenu()">☰</button>
<nav class="desktop-nav">
{% if user %}
<a href="/">Home</a>
<a href="/search">Search</a>
<a href="/blog/new">New Blog</a>
<a href="/profile/{{user.username}}">Profile</a>
<a href="/settings">Settings</a>
{% if user.role == 'admin' %}
<a href="/admin" style="color:var(--primary);font-weight:600;">Admin</a>
{% endif %}
<a href="/logout">Logout</a>
{% else %}
<a href="/">Home</a>
<a href="/search">Search</a>
<a href="/signin">Sign In</a>
<a href="/signup">Sign Up</a>
{% endif %}
<button id="theme-toggle" class="theme-toggle">🌙</button>
</nav>
</div>
</header>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu">
<div class="mobile-menu-content">
<div class="mobile-menu-header">
<h2 style="margin:0;color:var(--primary);">🚀 Navigation</h2>
<button class="mobile-menu-close" onclick="toggleMobileMenu()">✕</button>
</div>
<nav class="mobile-menu-nav">
{% if user %}
<a href="/" onclick="toggleMobileMenu()">🏠 Home</a>
<a href="/search" onclick="toggleMobileMenu()">🔍 Search</a>
<a href="/blog/new" onclick="toggleMobileMenu()">✏️ New Blog</a>
<a href="/profile/{{user.username}}" onclick="toggleMobileMenu()">👤 Profile</a>
<a href="/settings" onclick="toggleMobileMenu()">⚙️ Settings</a>
{% if user.role == 'admin' %}
<a href="/admin" onclick="toggleMobileMenu()" style="color:var(--primary);font-weight:600;">🎛️ Admin</a>
{% endif %}
<a href="/logout" onclick="toggleMobileMenu()">🚪 Logout</a>
{% else %}
<a href="/" onclick="toggleMobileMenu()">🏠 Home</a>
<a href="/search" onclick="toggleMobileMenu()">🔍 Search</a>
<a href="/signin" onclick="toggleMobileMenu()">🔑 Sign In</a>
<a href="/signup" onclick="toggleMobileMenu()">📝 Sign Up</a>
{% endif %}
<div style="margin-top:20px;padding-top:20px;border-top:1px solid var(--border);">
<button id="mobile-theme-toggle" class="theme-toggle" style="width:100%;" onclick="toggleTheme();toggleMobileMenu()">🌙 Toggle Theme</button>
</div>
</nav>
</div>
</div>
<main class="container">
{% block content %}{% endblock %}
</main>
<footer>
<div class="container">
<div class="footer-content">
<p>Notely - Open Source Blog Platform</p>
<nav class="footer-links">
<a href="/terms">Terms of Service</a>
<a href="/privacy">Privacy Policy</a>
<a href="/rules">Community Rules</a>
<a href="https://github.com/Parham125/notely" target="_blank">GitHub</a>
</nav>
</div>
</div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/marked/lib/marked.umd.js"></script>
<script src="/static/js/marked-callouts.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.8/purify.min.js"></script>
<script src="/static/js/theme.js"></script>
<script src="/static/js/comments.js"></script>
{% if request.path.startswith('/admin') %}
<script src="/static/js/admin.js"></script>
{% endif %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
{% block scripts %}{% endblock %}
</body>
</html>
